CKEDITOR.plugins.add("extenso",{init:function(l){l.addCommand("inserirExtenso",{exec:function(l){var m=l.getSelection().getSelectedText();if(infraValidarDin(m)){var g=["zero um dois três quatro cinco seis sete oito nove dez onze doze treze quatorze quinze dezesseis dezessete dezoito dezenove".split(" "),"dez vinte trinta quarenta cinquenta sessenta setenta oitenta noventa".split(" "),"cem cento duzentos trezentos quatrocentos quinhentos seiscentos setecentos oitocentos novecentos".split(" "),"mil milhão bilhão trilhão quadrilhão quintilhão sextilhão setilhão octilhão nonilhão decilhão undecilhão dodecilhão tredecilhão quatrodecilhão quindecilhão sedecilhão septendecilhão octencilhão nonencilhão".split(" ")],
c,h,a,b;h=m.replace(/[^,\d]/g,"").split(",");for(var p=h.length-1,e,f=-1,n=[],k=[],d="";++f<=p;k=[])if(f&&(h[f]=(1*("."+h[f])).toFixed(2).slice(2)),(c=(a=h[f]).slice((e=a.length)%3).match(/\d{3}/g),a=e%3?[a.slice(0,e%3)]:[],a=c?a.concat(c):a).length){c=-1;for(e=a.length;++c<e;d="")if(b=1*a[c])20>b%100&&(d+=g[0][b%100])||b%100+1&&(d+=g[1][(b%100/10>>0)-1]+(b%10?" e "+g[0][b%10]:"")),k.push((100>b?d:b%100?g[2][b/100>>0]+" e "+d:g[2][100==b?0:b/100>>0])+(-1<(d=e-c-2)?" "+(1<b&&0<d?g[3][d].replace("ão",
"ões"):g[3][d]):""));0==1*a[e-1]%100&&0<1*a[e-1]?e2=" e ":1<e&&0==1*a[e-2]?e2=", ":e2=" ";(c=1<k.length?(c=k.pop(),k.join(", ")+e2+c):k.join("")||(!f&&0<1*h[f+1]||n.length?"":g[0][0]))&&n.push(c+" "+(1<1*a.join("")?f?"centavos":(/0{6,}$/.test(h[0])?"de ":"")+"real".replace("l","is"):f?"centavo":"real"))}l.insertHtml(m+" ("+n.join(" e ")+")")}else 0==m.trim().length?alert("Selecione o valor para preencher por extenso. Use . para separar milhar e , para casas decimais."):alert("Valor inválido.")}});
l.ui.addButton("Extenso",{label:"Inserir valor por extenso",command:"inserirExtenso",icon:this.path+"images/extenso.png"})}});